import HandlerInfo from '../handler-info';
import { merge, subclass, promiseLabel } from 'router/utils';

/**
 * Generated by URL transitions and non-dynamic route segments in named Transitions.
 *
 * @constructor
 * @extends HandlerInfo
 */
var UnresolvedHandlerInfoByParam = subclass(HandlerInfo,
  /** @lends UnresolvedHandlerInfoByParam.prototype */ {

  initialize: function(props) {
    this.params = props.params || {};
  },

  getModel: function(payload) {
    var fullParams = this.params;
    if (payload && payload.queryParams) {
      fullParams = {};
      merge(fullParams, this.params);
      fullParams.queryParams = payload.queryParams;
    }

    var hookName = typeof this.handler.deserialize === 'function' ?
                   'deserialize' : 'model';

    return this.runSharedModelHook(payload, hookName, [fullParams]);
  }
});

export default UnresolvedHandlerInfoByParam;

