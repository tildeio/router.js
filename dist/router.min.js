(function(e,r){typeof exports==="object"&&typeof module!=="undefined"?r(exports,require("route-recognizer"),require("rsvp")):typeof define==="function"&&define.amd?define(["exports","route-recognizer","rsvp"],r):r(e.router={},e.RouteRecognizer,e.rsvp)})(this,function(e,r,t){"use strict";r="default"in r?r["default"]:r;var n=Array.prototype.slice;var a;if(!Array.isArray){a=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}else{a=Array.isArray}var i=a;function s(e,r){for(var t in r){if(r.hasOwnProperty(t)){e[t]=r[t]}}}var o=Object.create||function(e){function r(){}r.prototype=e;return new r};function l(e){var r=e&&e.length,t,a;if(r&&r>0&&e[r-1]&&e[r-1].hasOwnProperty("queryParams")){a=e[r-1].queryParams;t=n.call(e,0,r-1);return[t,a]}else{return[e,null]}}function h(e){for(var r in e){if(typeof e[r]==="number"){e[r]=""+e[r]}else if(i(e[r])){for(var t=0,n=e[r].length;t<n;t++){e[r][t]=""+e[r][t]}}}}function u(e,r,t){if(!e.log){return}if(arguments.length===3){e.log("Transition #"+r+": "+t)}else{t=r;e.log(t)}}function f(e,r){var t=arguments;return function(a){var i=n.call(t,2);i.push(a);return r.apply(e,i)}}function d(e){return typeof e==="string"||e instanceof String||typeof e==="number"||e instanceof Number}function c(e,r){for(var t=0,n=e.length;t<n&&false!==r(e[t]);t++){}}function v(e,r,t,n){if(e.triggerEvent){e.triggerEvent(r,t,n);return}var a=n.shift();if(!r){if(t){return}throw new Error("Could not trigger event '"+a+"'. There are no active handlers")}var i=false;for(var s=r.length-1;s>=0;s--){var o=r[s],l=o.handler;if(l.events&&l.events[a]){if(l.events[a].apply(l,n)===true){i=true}else{return}}}if(!i&&!t){throw new Error("Nothing handled the event '"+a+"'.")}}function m(e,r){var t;var n={all:{},changed:{},removed:{}};s(n.all,r);var a=false;h(e);h(r);for(t in e){if(e.hasOwnProperty(t)){if(!r.hasOwnProperty(t)){a=true;n.removed[t]=e[t]}}}for(t in r){if(r.hasOwnProperty(t)){if(i(e[t])&&i(r[t])){if(e[t].length!==r[t].length){n.changed[t]=r[t];a=true}else{for(var o=0,l=e[t].length;o<l;o++){if(e[t][o]!==r[t][o]){n.changed[t]=r[t];a=true}}}}else{if(e[t]!==r[t]){n.changed[t]=r[t];a=true}}}}return a&&n}function p(e){return"Router: "+e}function g(e,r){function t(r){e.call(this,r||{})}t.prototype=o(e.prototype);s(t.prototype,r);return t}function y(e,r){if(!e){return}var t="_"+r;return e[t]&&t||e[r]&&r}function I(e,r,t,n){var a=y(e,r);return a&&e[a].call(e,t,n)}function P(e,r,t){var n=y(e,r);if(n){if(t.length===0){return e[n].call(e)}else if(t.length===1){return e[n].call(e,t[0])}else if(t.length===2){return e[n].call(e,t[0],t[1])}else{return e[n].apply(e,t)}}}function b(e){this.handlerInfos=[];this.queryParams={};this.params={}}b.prototype={handlerInfos:null,queryParams:null,params:null,promiseLabel:function(e){var r="";c(this.handlerInfos,function(e){if(r!==""){r+="."}r+=e.name});return p("'"+r+"': "+e)},resolve:function(e,r){var n=this;var a=this.params;c(this.handlerInfos,function(e){a[e.name]=e.params||{}});r=r||{};r.resolveIndex=0;var i=this;var s=false;return t.Promise.resolve(null,this.promiseLabel("Start transition")).then(u,null,this.promiseLabel("Resolve handler"))["catch"](l,this.promiseLabel("Handle error"));function o(){return t.Promise.resolve(e(),i.promiseLabel("Check if should continue"))["catch"](function(e){s=true;return t.Promise.reject(e)},i.promiseLabel("Handle abort"))}function l(e){var n=i.handlerInfos;var a=r.resolveIndex>=n.length?n.length-1:r.resolveIndex;return t.Promise.reject({error:e,handlerWithError:i.handlerInfos[a].handler,wasAborted:s,state:i})}function h(e){var t=i.handlerInfos[r.resolveIndex].isResolved;i.handlerInfos[r.resolveIndex++]=e;if(!t){var n=e.handler;I(n,"redirect",e.context,r)}return o().then(u,null,i.promiseLabel("Resolve handler"))}function u(){if(r.resolveIndex===i.handlerInfos.length){return{error:null,state:i}}var e=i.handlerInfos[r.resolveIndex];return e.resolve(o,r).then(h,null,i.promiseLabel("Proceed"))}}};function w(e,r,n,a){var i=this;this.state=n||e.state;this.intent=r;this.router=e;this.data=this.intent&&this.intent.data||{};this.resolvedModels={};this.queryParams={};if(a){this.promise=t.Promise.reject(a);this.error=a;return}if(n){this.params=n.params;this.queryParams=n.queryParams;this.handlerInfos=n.handlerInfos;var s=n.handlerInfos.length;if(s){this.targetName=n.handlerInfos[s-1].name}for(var o=0;o<s;++o){var l=n.handlerInfos[o];if(!l.isResolved){break}this.pivotHandler=l.handler}this.sequence=w.currentSequence++;this.promise=n.resolve(h,this)["catch"](function(e){if(e.wasAborted||i.isAborted){return t.Promise.reject(x(i))}else{i.trigger("error",e.error,i,e.handlerWithError);i.abort();return t.Promise.reject(e.error)}},p("Handle Abort"))}else{this.promise=t.Promise.resolve(this.state);this.params={}}function h(){if(i.isAborted){return t.Promise.reject(undefined,p("Transition aborted - reject"))}}}w.currentSequence=0;w.prototype={targetName:null,urlMethod:"update",intent:null,params:null,pivotHandler:null,resolveIndex:0,handlerInfos:null,resolvedModels:null,isActive:true,state:null,queryParamsOnly:false,isTransition:true,isExiting:function(e){var r=this.handlerInfos;for(var t=0,n=r.length;t<n;++t){var a=r[t];if(a.name===e||a.handler===e){return false}}return true},promise:null,data:null,then:function(e,r,t){return this.promise.then(e,r,t)},"catch":function(e,r){return this.promise["catch"](e,r)},"finally":function(e,r){return this.promise["finally"](e,r)},abort:function(){if(this.isAborted){return this}u(this.router,this.sequence,this.targetName+": transition was aborted");this.intent.preTransitionState=this.router.state;this.isAborted=true;this.isActive=false;this.router.activeTransition=null;return this},retry:function(){this.abort();return this.router.transitionByIntent(this.intent,false)},method:function(e){this.urlMethod=e;return this},trigger:function(e){var r=n.call(arguments);if(typeof e==="boolean"){r.shift()}else{e=false}v(this.router,this.state.handlerInfos.slice(0,this.resolveIndex+1),e,r)},followRedirects:function(){var e=this.router;return this.promise["catch"](function(r){if(e.activeTransition){return e.activeTransition.followRedirects()}return t.Promise.reject(r)})},toString:function(){return"Transition (sequence "+this.sequence+")"},log:function(e){u(this.router,this.sequence,e)}};w.prototype.send=w.prototype.trigger;function x(e){u(e.router,e.sequence,"detected abort.");return new T}function T(e){this.message=e||"TransitionAborted";this.name="TransitionAborted"}function q(e){this.initialize(e);this.data=this.data||{}}q.prototype={initialize:null,applyToState:null};function H(e){var r=e||{};s(this,r);this.initialize(r)}H.prototype={name:null,handler:null,params:null,context:null,factory:null,initialize:function(){},log:function(e,r){if(e.log){e.log(this.name+": "+r)}},promiseLabel:function(e){return p("'"+this.name+"' "+e)},getUnresolved:function(){return this},serialize:function(){return this.params||{}},resolve:function(e,r){var n=f(this,this.checkForAbort,e),a=f(this,this.runBeforeModelHook,r),i=f(this,this.getModel,r),s=f(this,this.runAfterModelHook,r),o=f(this,this.becomeResolved,r);return t.Promise.resolve(undefined,this.promiseLabel("Start handler")).then(n,null,this.promiseLabel("Check for abort")).then(a,null,this.promiseLabel("Before model")).then(n,null,this.promiseLabel("Check if aborted during 'beforeModel' hook")).then(i,null,this.promiseLabel("Model")).then(n,null,this.promiseLabel("Check if aborted in 'model' hook")).then(s,null,this.promiseLabel("After model")).then(n,null,this.promiseLabel("Check if aborted in 'afterModel' hook")).then(o,null,this.promiseLabel("Become resolved"))},runBeforeModelHook:function(e){if(e.trigger){e.trigger(true,"willResolveModel",e,this.handler)}return this.runSharedModelHook(e,"beforeModel",[])},runAfterModelHook:function(e,r){var t=this.name;this.stashResolvedModel(e,r);return this.runSharedModelHook(e,"afterModel",[r]).then(function(){return e.resolvedModels[t]},null,this.promiseLabel("Ignore fulfillment value and return model value"))},runSharedModelHook:function(e,r,n){this.log(e,"calling "+r+" hook");if(this.queryParams){n.push(this.queryParams)}n.push(e);var a=P(this.handler,r,n);if(a&&a.isTransition){a=null}return t.Promise.resolve(a,this.promiseLabel("Resolve value returned from one of the model hooks"))},getModel:null,checkForAbort:function(e,r){return t.Promise.resolve(e(),this.promiseLabel("Check for abort")).then(function(){return r},null,this.promiseLabel("Ignore fulfillment value and continue"))},stashResolvedModel:function(e,r){e.resolvedModels=e.resolvedModels||{};e.resolvedModels[this.name]=r},becomeResolved:function(e,r){var t=this.serialize(r);if(e){this.stashResolvedModel(e,r);e.params=e.params||{};e.params[this.name]=t}return this.factory("resolved",{context:r,name:this.name,handler:this.handler,params:t})},shouldSupercede:function(e){if(!e){return true}var r=e.context===this.context;return e.name!==this.name||this.hasOwnProperty("context")&&!r||this.hasOwnProperty("params")&&!R(this.params,e.params)}};function R(e,r){if(!e^!r){return false}if(!e){return true}for(var t in e){if(e.hasOwnProperty(t)&&e[t]!==r[t]){return false}}return true}var L=g(H,{resolve:function(e,r){if(r&&r.resolvedModels){r.resolvedModels[this.name]=this.context}return t.Promise.resolve(this,this.promiseLabel("Resolve"))},getUnresolved:function(){return this.factory("param",{name:this.name,handler:this.handler,params:this.params})},isResolved:true});var A=g(H,{getModel:function(e){this.log(e,this.name+": resolving provided model");return t.Promise.resolve(this.context)},initialize:function(e){this.names=e.names||[];this.context=e.context},serialize:function(e){var r=e||this.context,t=this.names,n=this.handler;var a={};if(d(r)){a[t[0]]=r;return a}if(n.serialize){return n.serialize(r,t)}if(t.length!==1){return}var i=t[0];if(/_id$/.test(i)){a[i]=r.id}else{a[i]=r}return a}});var M=g(H,{initialize:function(e){this.params=e.params||{}},getModel:function(e){var r=this.params;if(e&&e.queryParams){r={};s(r,this.params);r.queryParams=e.queryParams}var t=this.handler;var n=y(t,"deserialize")||y(t,"model");return this.runSharedModelHook(e,n,[r])}});z.klasses={resolved:L,param:M,object:A};function z(e,r){var t=z.klasses[e],n=new t(r||{});n.factory=z;return n}var k=g(q,{name:null,pivotHandler:null,contexts:null,queryParams:null,initialize:function(e){this.name=e.name;this.pivotHandler=e.pivotHandler;this.contexts=e.contexts||[];this.queryParams=e.queryParams},applyToState:function(e,r,t,n){var a=l([this.name].concat(this.contexts)),i=a[0],s=a[1],o=r.handlersFor(i[0]);var h=o[o.length-1].handler;return this.applyToHandlers(e,o,t,h,n)},applyToHandlers:function(e,r,t,n,a,i){var o,l;var h=new b;var u=this.contexts.slice(0);var f=r.length;if(this.pivotHandler){for(o=0,l=r.length;o<l;++o){if(t(r[o].handler)===this.pivotHandler){f=o;break}}}var d=!this.pivotHandler;for(o=r.length-1;o>=0;--o){var c=r[o];var v=c.handler;var m=t(v);var p=e.handlerInfos[o];var g=null;if(c.names.length>0){if(o>=f){g=this.createParamHandlerInfo(v,m,c.names,u,p)}else{g=this.getHandlerInfoForDynamicSegment(v,m,c.names,u,p,n,o)}}else{g=this.createParamHandlerInfo(v,m,c.names,u,p)}if(i){g=g.becomeResolved(null,g.context);var y=p&&p.context;if(c.names.length>0&&g.context===y){g.params=p&&p.params}g.context=y}var I=p;if(o>=f||g.shouldSupercede(p)){f=Math.min(o,f);I=g}if(a&&!i){I=I.becomeResolved(null,I.context)}h.handlerInfos.unshift(I)}if(u.length>0){throw new Error("More context objects were passed than there are dynamic segments for the route: "+n)}if(!a){this.invalidateChildren(h.handlerInfos,f)}s(h.queryParams,this.queryParams||{});return h},invalidateChildren:function(e,r){for(var t=r,n=e.length;t<n;++t){var a=e[t];e[t]=e[t].getUnresolved()}},getHandlerInfoForDynamicSegment:function(e,r,t,n,a,i,s){var o=t.length;var l;if(n.length>0){l=n[n.length-1];if(d(l)){return this.createParamHandlerInfo(e,r,t,n,a)}else{n.pop()}}else if(a&&a.name===e){return a}else{if(this.preTransitionState){var h=this.preTransitionState.handlerInfos[s];l=h&&h.context}else{return a}}return z("object",{name:e,handler:r,context:l,names:t})},createParamHandlerInfo:function(e,r,t,n,a){var i={};var s=t.length;while(s--){var o=a&&e===a.name&&a.params||{};var l=n[n.length-1];var h=t[s];if(d(l)){i[h]=""+n.pop()}else{if(o.hasOwnProperty(h)){i[h]=o[h]}else{throw new Error("You didn't provide enough string/numeric parameters to satisfy all of the dynamic segments for route "+e)}}}return z("param",{name:e,handler:r,params:i})}});function S(e){this.message=e||"UnrecognizedURLError";this.name="UnrecognizedURLError";Error.call(this)}S.prototype=o(Error.prototype);var U=g(q,{url:null,initialize:function(e){this.url=e.url},applyToState:function(e,r,t){var n=new b;var a=r.recognize(this.url),i={},o,l;if(!a){throw new S(this.url)}var h=false;for(o=0,l=a.length;o<l;++o){var u=a[o];var f=u.handler;var d=t(f);if(d.inaccessibleByURL){throw new S(this.url)}var c=z("param",{name:f,handler:d,params:u.params});var v=e.handlerInfos[o];if(h||c.shouldSupercede(v)){h=true;n.handlerInfos[o]=c}else{n.handlerInfos[o]=v}}s(n.queryParams,a.queryParams);return n}});var E=Array.prototype.pop;function O(e){var t=e||{};this.getHandler=t.getHandler||this.getHandler;this.updateURL=t.updateURL||this.updateURL;this.replaceURL=t.replaceURL||this.replaceURL;this.didTransition=t.didTransition||this.didTransition;this.willTransition=t.willTransition||this.willTransition;this.delegate=t.delegate||this.delegate;this.triggerEvent=t.triggerEvent||this.triggerEvent;this.log=t.log||this.log;this.recognizer=new r;this.reset()}function C(e,r){var t=!!this.activeTransition;var n=t?this.activeTransition.state:this.state;var a;var i=e.applyToState(n,this.recognizer,this.getHandler,r);var s=m(n.queryParams,i.queryParams);if(W(i.handlerInfos,n.handlerInfos)){if(s){a=this.queryParamsTransition(s,t,n,i);if(a){return a}}return this.activeTransition||new w(this)}if(r){B(this,i);return}a=new w(this,e,i);if(this.activeTransition){this.activeTransition.abort()}this.activeTransition=a;a.promise=a.promise.then(function(e){return F(a,e.state)},null,p("Settle transition promise when transition is finalized"));if(!t){$(this,i,a)}j(this,i,s);return a}O.prototype={map:function(e){this.recognizer.delegate=this.delegate;this.recognizer.map(e,function(e,r){for(var t=r.length-1,n=true;t>=0&&n;--t){var a=r[t];e.add(r,{as:a.handler});n=a.path==="/"||a.path===""||a.handler.slice(-6)===".index"}})},hasRoute:function(e){return this.recognizer.hasRoute(e)},getHandler:function(){},queryParamsTransition:function(e,r,t,n){var a=this;j(this,n,e);if(!r&&this.activeTransition){return this.activeTransition}else{var i=new w(this);i.queryParamsOnly=true;t.queryParams=Y(this,n.handlerInfos,n.queryParams,i);i.promise=i.promise.then(function(e){Q(i,t,true);if(a.didTransition){a.didTransition(a.currentHandlerInfos)}return e},null,p("Transition complete"));return i}},transitionByIntent:function(e,r){try{return C.apply(this,arguments)}catch(t){return new w(this,e,null,t)}},reset:function(){if(this.state){c(this.state.handlerInfos.slice().reverse(),function(e){var r=e.handler;I(r,"exit")})}this.state=new b;this.currentHandlerInfos=null},activeTransition:null,handleURL:function(e){var r=n.call(arguments);if(e.charAt(0)!=="/"){r[0]="/"+e}return D(this,r).method(null)},updateURL:function(){throw new Error("updateURL is not implemented")},replaceURL:function(e){this.updateURL(e)},transitionTo:function(e){return D(this,arguments)},intermediateTransitionTo:function(e){return D(this,arguments,true)},refresh:function(e){var r=this.activeTransition?this.activeTransition.state:this.state;var t=r.handlerInfos;var n={};for(var a=0,i=t.length;a<i;++a){var s=t[a];n[s.name]=s.params||{}}u(this,"Starting a refresh transition");var o=new k({name:t[t.length-1].name,pivotHandler:e||t[0].handler,contexts:[],queryParams:this._changedQueryParams||r.queryParams||{}});return this.transitionByIntent(o,false)},replaceWith:function(e){return D(this,arguments).method("replace")},generate:function(e){var r=l(n.call(arguments,1)),t=r[0],a=r[1];var i=new k({name:e,contexts:t});var o=i.applyToState(this.state,this.recognizer,this.getHandler);var h={};for(var u=0,f=o.handlerInfos.length;u<f;++u){var d=o.handlerInfos[u];var c=d.serialize();s(h,c)}h.queryParams=a;return this.recognizer.generate(e,h)},applyIntent:function(e,r){var t=new k({name:e,contexts:r});var n=this.activeTransition&&this.activeTransition.state||this.state;return t.applyToState(n,this.recognizer,this.getHandler)},isActiveIntent:function(e,r,t,n){var a=n||this.state,i=a.handlerInfos,o=false,l,h,u,f,d,c;if(!i.length){return false}var v=i[i.length-1].name;var p=this.recognizer.handlersFor(v);var g=0;for(c=p.length;g<c;++g){u=i[g];if(u.name===e){break}}if(g===p.length){return false}var y=new b;y.handlerInfos=i.slice(0,g+1);p=p.slice(0,g+1);var I=new k({name:v,contexts:r});var P=I.applyToHandlers(y,p,this.getHandler,v,true,true);var w=W(P.handlerInfos,y.handlerInfos);if(!t||!w){return w}var x={};s(x,t);var T=a.queryParams;for(var q in T){if(T.hasOwnProperty(q)&&x.hasOwnProperty(q)){x[q]=T[q]}}return w&&!m(x,t)},isActive:function(e){var r=l(n.call(arguments,1));return this.isActiveIntent(e,r[0],r[1])},trigger:function(e){var r=n.call(arguments);v(this,this.currentHandlerInfos,false,r)},log:null};function j(e,r,t){if(t){e._changedQueryParams=t.all;v(e,r.handlerInfos,true,["queryParamsDidChange",t.changed,t.all,t.removed]);e._changedQueryParams=null}}function B(e,r,t){var n=N(e.state,r);var a,i,s;for(a=0,i=n.exited.length;a<i;a++){s=n.exited[a].handler;delete s.context;I(s,"reset",true,t);I(s,"exit",t)}var o=e.oldState=e.state;e.state=r;var l=e.currentHandlerInfos=n.unchanged.slice();try{for(a=0,i=n.reset.length;a<i;a++){s=n.reset[a].handler;I(s,"reset",false,t)}for(a=0,i=n.updatedContext.length;a<i;a++){_(l,n.updatedContext[a],false,t)}for(a=0,i=n.entered.length;a<i;a++){_(l,n.entered[a],true,t)}}catch(h){e.state=o;e.currentHandlerInfos=o.handlerInfos;throw h}e.state.queryParams=Y(e,l,r.queryParams,t)}function _(e,r,t,n){var a=r.handler,i=r.context;if(t){I(a,"enter",n)}if(n&&n.isAborted){throw new T}a.context=i;I(a,"contextDidChange");I(a,"setup",i,n);if(n&&n.isAborted){throw new T}e.push(r);return true}function N(e,r){var t=e.handlerInfos;var n=r.handlerInfos;var a={updatedContext:[],exited:[],entered:[],unchanged:[]};var i,s=false,o,l;for(o=0,l=n.length;o<l;o++){var h=t[o],u=n[o];if(!h||h.handler!==u.handler){i=true}if(i){a.entered.push(u);if(h){a.exited.unshift(h)}}else if(s||h.context!==u.context){s=true;a.updatedContext.push(u)}else{a.unchanged.push(h)}}for(o=n.length,l=t.length;o<l;o++){a.exited.unshift(t[o])}a.reset=a.updatedContext.slice();a.reset.reverse();return a}function Q(e,r,t){var n=e.urlMethod;if(!n){return}var a=e.router,i=r.handlerInfos,o=i[i.length-1].name,l={};for(var h=i.length-1;h>=0;--h){var u=i[h];s(l,u.params);if(u.handler.inaccessibleByURL){n=null}}if(n){l.queryParams=e._visibleQueryParams||r.queryParams;var f=a.recognizer.generate(o,l);if(n==="replace"){a.replaceURL(f)}else{a.updateURL(f)}}}function F(e,r){try{u(e.router,e.sequence,"Resolved all models on destination route; finalizing transition.");var n=e.router,a=r.handlerInfos,i=e.sequence;B(n,r,e);if(e.isAborted){n.state.handlerInfos=n.currentHandlerInfos;return t.Promise.reject(x(e))}Q(e,r,e.intent.url);e.isActive=false;n.activeTransition=null;v(n,n.currentHandlerInfos,true,["didTransition"]);if(n.didTransition){n.didTransition(n.currentHandlerInfos)}u(n,e.sequence,"TRANSITION COMPLETE.");return a[a.length-1].handler}catch(s){if(!((s instanceof T))){var o=e.state.handlerInfos;e.trigger(true,"error",s,e,o[o.length-1].handler);e.abort()}throw s}}function D(e,r,t){var a=r[0]||"/";var i=r[r.length-1];var s={};if(i&&i.hasOwnProperty("queryParams")){s=E.call(r).queryParams}var o;if(r.length===0){u(e,"Updating query params");var l=e.state.handlerInfos;o=new k({name:l[l.length-1].name,contexts:[],queryParams:s})}else if(a.charAt(0)==="/"){u(e,"Attempting URL transition to "+a);o=new U({url:a})}else{u(e,"Attempting transition to "+a);o=new k({name:r[0],contexts:n.call(r,1),queryParams:s})}return e.transitionByIntent(o,t)}function W(e,r){if(e.length!==r.length){return false}for(var t=0,n=e.length;t<n;++t){if(e[t]!==r[t]){return false}}return true}function Y(e,r,t,n){for(var a in t){if(t.hasOwnProperty(a)&&t[a]===null){delete t[a]}}var i=[];v(e,r,true,["finalizeQueryParamChange",t,i,n]);if(n){n._visibleQueryParams={}}var s={};for(var o=0,l=i.length;o<l;++o){var h=i[o];s[h.key]=h.value;if(n&&h.visible!==false){n._visibleQueryParams[h.key]=h.value}}return s}function $(e,r,t){var n=e.state.handlerInfos,a=[],i=null,s,o,l,h,u,f;h=n.length;for(l=0;l<h;l++){u=n[l];f=r.handlerInfos[l];if(!f||u.name!==f.name){i=l;break}if(!f.isResolved){a.push(u)}}if(i!==null){s=n.slice(i,h);o=function(e){for(var r=0,t=s.length;r<t;r++){if(s[r].name===e){return true}}return false}}v(e,n,true,["willTransition",t]);if(e.willTransition){e.willTransition(n,r.handlerInfos,t)}}var G=O;e["default"]=G});